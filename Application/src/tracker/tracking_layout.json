{ "objects": [
    {
        "type":"collection",
        "children":[
            {
                "type":"condition",
                "var":"{bool:{global.gui_focus_group}}",
                "then":{
                    "type":"collection",
                    "pos":[10,90],
                    "size":[200,350],
                    "fill":[50,50,50,125],
                    "children": [
                        { 
                            "type":"stext",
                            "text":"<b>{global.individual_prefix}{global.gui_focus_group}</b>",
                            "pos":[10,10]
                        }
                    ]
                },
                "else":{ "type":"collection", "children":[] }
            } 
        ]
    },
    
    
    {  "type":"condition",
       "var":"{global.gui_show_timeline}",
        "then":{
            "type":"collection",
            "children":[
                
                
                {
                    "type":"vlayout",
                    "pad":[0,10,0,0],
                    "children":[
                        {
                            "type":"hlayout",
                            "pad":[10,0,0,0],
                            "children":[
                                {
                                    "type":"condition",
                                    "var":"{equal:{-:{global.video_length}:1}:{tracker.to}}",
                                    "then": {
                                        "type":"rect",
                                        "size":[0,0]
                                    },
                                    "else": {
                                        "type":"button",
                                        "action":"set:analysis_paused:{not:{global.analysis_paused}}",
                                        "text":"{if:global.analysis_paused:'<sym>▶</sym>':'<sym>⏸</sym>'}",
                                        "size":[25,25],
                                        "font":{"size":0.8},
                                        "fill":[10,0,0,0],
                                        "line":[10,0,0,0],
                                        "color":"{if:global.analysis_paused:[30,80,30,100]:[200,120,80,100]}"
                                    }
                                },
                                
                                {
                                    "type": "stext",
                                    "text": "<b>{global.source}</b> — <a>{global.gui_frame}</a>/<a>{-:{global.video_length}:1}</a> {if:{equal:{-:{global.video_length}:1}:{tracker.to}}:'':{if:global.analysis_paused:'(<orange>paused</orange>)':'<i>processing @ <a>{fps}</a>fps</i>'}}",
                                    "font":{ "size":0.65 },
                                    "shadow":0.5,
                                    "pad":[-5,0,0,7.5]
                                }
                            ]
                        },
                        {
                            "type":"collection",
                            "children":[
                                {
                                    "type": "rect",
                                    "pos": [10, -10],
                                    "size": "[{+:{window_size.x}:-20},30]",
                                    "fill": [20,20,20,125],
                                    "line": [80,80,80,255],
                                    "clickable":true,
                                    "action": "set:gui_frame:{min:{-:{global.video_length}:1}:{*:{/:{-:{mouse.x}:10}:{-:{window_size.x}:25}}:{-:{global.video_length}:0.5}}}"
                                },

                                {
                                    "type": "rect",
                                    "pos": [11, -9],
                                    "size": "[{round:{*:{/:{tracker.to}:{{-:{global.video_length}:1}}}:{+:{window_size.x}:-23}}},28]",
                                    "fill": [30,30,30,155],
                                    "line": [50,0,0,0],
                                    "clickable":false
                                },

                                {
                                    "type":"each",
                                    "var":"consec",
                                    "do": {
                                        "type": "rect",
                                        "pos": "{addVector:[{round:{*:{/:{i.from}:{{-:{global.video_length}:1}}}:{+:{window_size.x}:-25}}},0]:[12.5,-10]}",
                                        "size": "{addVector:[{round:{*:{/:{-:{i.to}:{i.from}}:{{-:{global.video_length}:1}}}:{-:{window_size.x}:25}}},30]:[0,0]}",
                                        "fill": "{clrAlpha:{i.color}:50}",
                                        "line":"{clrAlpha:{i.color}:100}"
                                    }
                                },

                                {
                                    "type": "rect",
                                    "pos": "{addVector:[{round:{*:{/:{global.gui_frame}:{{-:{global.video_length}:1}}}:{+:{window_size.x}:-25}}},-12]:[12.5,0]}",
                                    "origin": [0.5,0],
                                    "size": [5,34],
                                    "fill": [150,150,150,225],
                                    "line":[50,50,50,255]
                                }
                            ]
                        }
                    ]
                },

                {
                    "type":"condition",
                    "var":"{key.lctrl}",
                    "then":{ 
                        "type":"collection",
                        "children":[
                            {
                                "type":"button",
                                "text":"Test",
                                "pos":[300,100],
                                "size":[100,40],
                                "action":"change_scene:'starting-scene'"
                            },
                            {
                                "type":"settings",
                                "var":"gui_frame",
                                "size":[100,40],
                                "pos":[300,150],
                                "fill":[50,50,50]
                            },
                            {
                                "type":"settings",
                                "var":"video_length",
                                "size":[100,40],
                                "pos":[300,200],
                                "fill":[50,50,50]
                            }
                        ]
                    },
                    "else":{ "type":"rect", "size":[0,0] }
                },
                
                {
                    "type":"hlayout",
                    "pos":"{addVector:[0,{-:{window_size.y}:5}]:0}",
                    "origin":[0,1],
                    "pad":[10,10,0,0],
                    "children":[
                        {
                            "type":"list",
                            "pos":[0,0],
                            "size":[150,140],
                            "fill":[50,50,50],
                            "foldable":true,
                            "folded":true,
                            "text":"display",
                            "item_height":1,
                            "font":{"size":0.6},
                            "items":[
                                {
                                    "text":"selections",
                                    "detail":"{if:global.gui_show_selections:'hide':'show'}",
                                    "action":"set:gui_show_selections:{not:{global.gui_show_selections}}"
                                },
                                {
                                    "text":"blobs",
                                    "detail":"{if:global.gui_show_blobs:'hide':'show'}",
                                    "action":"set:gui_show_blobs:{not:{global.gui_show_blobs}}"
                                },
                                {
                                    "text":"heatmap",
                                    "detail":"{if:global.gui_show_heatmap:'hide':'show'}",
                                    "action":"set:gui_show_heatmap:{not:{global.gui_show_heatmap}}"
                                },
                                {
                                    "text":"gui_show_posture",
                                    "detail":"{if:global.gui_show_posture:'hide':'show'}",
                                    "action":"set:gui_show_posture:{not:{global.gui_show_posture}}"
                                },
                                {
                                    "text":"gui_show_midline",
                                    "detail":"{if:global.gui_show_midline:'hide':'show'}",
                                    "action":"set:gui_show_midline:{not:{global.gui_show_midline}}"
                                },
                                {
                                    "text":"gui_show_outline",
                                    "detail":"{if:global.gui_show_outline:'hide':'show'}",
                                    "action":"set:gui_show_outline:{not:{global.gui_show_outline}}"
                                },
                                {
                                    "text":"gui_show_visualfield",
                                    "detail":"{if:global.gui_show_visualfield:'hide':'show'}",
                                    "action":"set:gui_show_visualfield:{not:{global.gui_show_visualfield}}"
                                },
                                {
                                    "text":"gui_show_probabilities",
                                    "detail":"{if:global.gui_show_probabilities:'hide':'show'}",
                                    "action":"set:gui_show_probabilities:{not:{global.gui_show_probabilities}}"
                                },
                                {
                                    "text":"gui_show_texts",
                                    "detail":"{if:global.gui_show_texts:'hide':'show'}",
                                    "action":"set:gui_show_texts:{not:{global.gui_show_texts}}"
                                },
                                {
                                    "text":"gui_show_graph",
                                    "detail":"{if:global.gui_show_graph:'hide':'show'}",
                                    "action":"set:gui_show_graph:{not:{global.gui_show_graph}}"
                                },
                                {
                                    "text":"gui_auto_scale",
                                    "detail":"{if:global.gui_auto_scale:'hide':'show'}",
                                    "action":"set:gui_auto_scale:{not:{global.gui_auto_scale}}"
                                },
                                {
                                    "text":"gui_auto_scale_focus_one",
                                    "detail":"{if:global.gui_auto_scale_focus_one:'hide':'show'}",
                                    "action":"set:gui_auto_scale_focus_one:{not:{global.gui_auto_scale_focus_one}}"
                                }
                            ]

                        },
                        {
                            "type":"settings",
                            "var":"",
                            "font":{"size":0.75,"align":"center"},
                            "fill":[50,50,50],
                            "line":[75,75,75],
                            "size":[400,40],
                            "color":[225,225,225],
                            "desc":"",
                            "highlight_clr":[75,75,75,255]
                        }
                    ]
                }
            ]
        },
        "else": { "type":"rect", "size":[0,0] }
    }

]}